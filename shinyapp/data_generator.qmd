---
title: "data_generator"
format: html
---

# Data, Schedule, & Teams

```{r}
library(tidyverse)
write_to_csv <- FALSE
# To-Do:
# Full Hopper Timer, >5-10s Solo Shooting, Preferred Zone / Role, Lap Timer to Shoot???

# Edit team numbers and length of dataframe here
size = 6*80
teams_list = c(116,122,449,526,539,611,612,620,1731,1793,1885,1895,1908,2028,2068,2186,2363,2377,2534,2890,2963,2988,3136,3258,3359,3373,4099,4472,4638,5243,5338,5353,5549,5587,6882,8230,8326,9072,9403,10449)
team = as.vector(replicate(ceiling(size / length(teams_list)), sample(teams_list, length(teams_list), replace = FALSE)))
team = team[-seq(length(team) - (ceiling(size/length(teams_list))*length(teams_list)-size) + 1, length(team)+1)]
match = floor(seq(from=6,to=size+5)/6)
robot = rep(c("R1", "R2", "R3", "B1", "B2", "B3"), size/6)

data <- data.frame(team, match) |>
    rowwise() |>
    mutate(
        auto_type = sample(c("CW", "RY", "MH", "MY", "JD", "GK", "DK"), size = 1),
        no_show = sample(c(TRUE, FALSE), size = 1, prob = c(5, 95)),
        auto_bump = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        auto_climb = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        auto_cycles = sample(0:20, size = 1),
        teleop_trench = sample(0:10, size = 1, prob = c(50, rep(5, 10))),
        teleop_bump = sample(0:10, size = 1, prob = c(50, rep(5, 10))),
        num_cycles = sample(0:6, size = 1),
        num_cycles_tenths = sample(0:9, size = 1),
        endgame_climb = sample(c("No", "L1", "L2", "L3", "F"), size = 1),
        climb_less_than_5 = sample(c(TRUE, FALSE), size = 1),
        died = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        inactive_strat = sample(c(1, 2, 3, 4, 5), size = 1),
        driver_rating = sample(0:5, size = 1),
        solo_shooting = sample(c(TRUE, FALSE), size = 1),
        card = sample(c("No Card", "Yellow", "Red"), size = 1)
        )

if (write_to_csv) write.csv(data, "data/test_data/data.csv", row.names = FALSE)
# --- #
raw <- read.csv("data/test_data/data.csv")
teams <- unlist(raw$team)
data <- matrix(teams, nrow = 6)
data <- t(data)
match <- 1:max(raw$match)
data <- as.data.frame(data)
data <- cbind(match, data) |>
    mutate(
        R1 = V1,
        R2 = V2, 
        R3 = V3, 
        B1 = V4,
        B2 = V5,
        B3 = V6
    ) |>
    select(match, R1, R2, R3, B1, B2, B3)

if (write_to_csv) write.csv(data, "../shinyapp/data/test_data/schedule.csv", row.names = FALSE)

# --- #
raw <- read.csv("data/test_data/data.csv")
team <- unique(raw$team)[order(unique(raw$team))]
if (write_to_csv) write.csv(as.data.frame(team), "../shinyapp/data/test_data/teams.csv", row.names = FALSE)
```

# Data

```{r}
library(tidyverse)
write_to_csv <- FALSE
# To-Do:
# Full Hopper Timer, >5-10s Solo Shooting, Preferred Zone / Role, Lap Timer to Shoot???

# Edit team numbers and length of dataframe here
size = 6*80
teams_list = c(116,122,449,526,539,611,612,620,1731,1793,1885,1895,1908,2028,2068,2186,2363,2377,2534,2890,2963,2988,3136,3258,3359,3373,4099,4472,4638,5243,5338,5353,5549,5587,6882,8230,8326,9072,9403,10449)
team = as.vector(replicate(ceiling(size / length(teams_list)), sample(teams_list, length(teams_list), replace = FALSE)))
team = team[-seq(length(team) - (ceiling(size/length(teams_list))*length(teams_list)-size) + 1, length(team)+1)]
match = floor(seq(from=6,to=size+5)/6)
robot = rep(c("R1", "R2", "R3", "B1", "B2", "B3"), size/6)
start_pos = rep(c("C", "M", "F"), size/3)

data <- data.frame(team, match, robot, start_pos) |>
    rowwise() |>
    mutate(
        scout = sample(c("CW", "RY", "MH", "MY", "JD", "GK", "DK"), size = 1),
        no_show = sample(c(TRUE, FALSE), size = 1, prob = c(5, 95)),
        auto_type = sample(c("1", "2", "3", "1, 2"), size = 1),
        auto_bump = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        auto_climb = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        auto_cycles = sample(0:20, size = 1),
        teleop_trench = sample(0:10, size = 1, prob = c(50, rep(5, 10))),
        teleop_bump = sample(0:10, size = 1, prob = c(50, rep(5, 10))),
        num_cycles = sample(0:6, size = 1),
        num_cycles_tenths = sample(0:9, size = 1),
        endgame_climb = sample(c("No", "L1", "L2", "L3", "F"), size = 1),
        climb_less_than_5 = sample(c(TRUE, FALSE), size = 1),
        died = sample(c(TRUE, FALSE), size = 1, prob = c(75, 25)),
        inactive_strat = sample(c(1, 2, 3, 4, 5), size = 1),
        driver_rating = sample(0:5, size = 1),
        solo_shooting = sample(c(TRUE, FALSE), size = 1),
        card = sample(c("No Card", "Yellow", "Red"), size = 1, prob = c(95, 4, 1))
        )

write.csv(data, "data/test_data/data.csv", row.names = FALSE)
```

# Schedule

```{r}
raw <- read.csv("data/test_data/data.csv")
teams <- unlist(raw$team)
data <- matrix(teams, ncol = 6)
match <- 1:max(raw$match)
data <- as.data.frame(data)
data <- cbind(match, data) |>
    mutate(
        R1 = V1,
        R2 = V2, 
        R3 = V3, 
        B1 = V4,
        B2 = V5,
        B3 = V6
    ) |>
    select(match, R1, R2, R3, B1, B2, B3)

write.csv(data, "../shinyapp/data/test_data/schedule.csv", row.names = FALSE)
```

# Teams

```{r}
raw <- read.csv("data/test_data/data.csv")
team <- unique(raw$team)[order(unique(raw$team))]
write.csv(as.data.frame(team), "../shinyapp/data/test_data/teams.csv")
```
